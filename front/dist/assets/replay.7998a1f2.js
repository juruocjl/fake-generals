import{aH as U,aI as W,r as f,d as H,ay as $,ax as Z,I as c,e as o,Y as N,an as u,Q as S,f as j,W as ee,ag as T,O as x,aM as V,a3 as B,aq as O,aK as ne,aJ as ae,H as v,J as L,aN as te,aO as le,aP as re}from"./style.190b2532.js";const se={key:0,href:"https://github.com/juruocjl/fake-generals",target:"_blank",class:"ribbons"},oe=u("img",{loading:"lazy",width:"149",height:"149",src:te,class:"attachment-full size-full",alt:"Fork me on GitHub","data-recalc-dims":"1"},null,-1),ue=[oe],ce={key:1,class:"index"},ve={class:"contain"},de=O("Start!"),ie={class:"turn"},fe=O("turn "),me={id:"turn"},pe={class:"rank"},he={id:"rank"},ye=u("tr",null,[u("th",null,"rank"),u("th",null,"name"),u("th",null,"army"),u("th",null,"land")],-1),_e=["innerHTML"],we=["innerHTML"],ge=["innerHTML"],ke=["onClick"],be={__name:"Replay",setup(z){const C=U();W(C);let w=f(!1);function E(n,e){return e=parseInt(e),e<1200?'<span class="newbiw">'+n+"</span>":e<1400?'<span class="pupil">'+n+"</span>":e<1600?'<span class="specialist">'+n+"</span>":e<1900?'<span class="expert">'+n+"</span>":e<2100?'<span class="candidate-master">'+n+"</span>":e<2400?'<span class="master">'+n+"</span>":e<3e3?'<span class="grandmaster">'+n+"</span>":'<span class="legendary-grandmaster">'+n+"</span>"}const g=["red","blue","green","purple","brown","orange","pink"];let d=f([]),k=f(0),b=f(0),h=f(30),p=f("");function I(n){for(var e=window.location.search.substring(1),s=e.split("&"),t=0;t<s.length;t++){var a=s[t].split("=");if(a[0]==n)return a[1]}return!1}I("name")&&(p.value=I("name"));function F(n,e,s){if(n=JSON.parse(JSON.stringify(n)),!s)return n;for(var t=0;t<k.value;t++)for(var a=0;a<b.value;a++)n[t][a][0]>=0&&n[t][a][1]>=0&&(n[t][a][0]==0?n[t][a][2]+=e:n[t][a][0]!=4?n[t][a][2]++:(n[t][a][2]--,n[t][a][2]==0&&(n[t][a][1]=-1)));return n}function J(n,e){return l.value[n][e][0]==-2||l.value[n][e][0]==-3?"#565656":l.value[n][e][0]==-1||l.value[n][e][0]==5?"#b3b3b3":l.value[n][e][0]==0?l.value[n][e][1]>=0?g[l.value[n][e][1]]:"#d7d7d7":l.value[n][e][1]>=0?g[l.value[n][e][1]]:"#757575"}var y=[];let M=f(0),m=f(0),l=H(()=>y[m.value]),_=H(()=>{for(var n=[],e=0;e<d.value.length;e++)n[e]=[0,0];for(var e=0;e<k.value;e++)for(var s=0;s<b.value;s++)l.value[e][s][0]>=0&&l.value[e][s][1]>=0&&(n[l.value[e][s][1]][1]++,n[l.value[e][s][1]][0]+=l.value[e][s][2]);return n}),D=H(()=>{for(var n=[],e=0;e<_.value.length;e++)d.value[e].vip==0?n[e]={name:E(d.value[e].name,d.value[e].rating),color:g[e],army:_.value[e][0],land:_.value[e][1]}:n[e]={name:E(d.value[e].name,d.value[e].rating)+'<i class="vip'+d.value[e].vip+'"></i>',color:g[e],army:_.value[e][0],land:_.value[e][1]};return n.sort((s,t)=>s.army!=t.army?t.army-s.army:s.land!=t.land?t.land-s.land:s.color<t.color?1:-1),n});document.onkeydown=function(n){var e=n||window.event||arguments.callee.caller.arguments[0];e&&e.keyCode==32&&(nowx.value=nowy.value=-1,show())};function q(n){var e=document.getElementById("map"),s=n.clientX,t=n.clientY,a=e.offsetLeft,r=e.offsetTop;window.onmousemove=function(i){var X=i.clientX,A=i.clientY,G=a+(X-s),K=r+(A-t);e.style.left=G+"px",e.style.top=K+"px"}}function P(){window.onmousemove=null}function Q(n){n.deltaY<0?h.value=Math.min(50,h.value+3):n.deltaY>0&&(h.value=Math.max(25,h.value-3))}document.body.onselectstart=document.body.oncontextmenu=function(){return!1};function R(){ne.get("getfile?name="+p.value).then(n=>{if(n.data=="Not Found")ae.error("Not Found.");else{w.value=!0;var e=n.data;k.value=e.his[0].length,b.value=e.his[0][0].length,d.value=e.users;var s=e.his.length;y[0]=e.his[0];for(var t=e.everyadd,a=1;a<e.his.length;a++)y[a]=F(y[a-1],(a+1)%t==0,e.ver>=2?a%2==1:!0),e.his[a].forEach(r=>{y[a][r[0]][r[1]]=r[2]});M.value=e.ver,document.onkeydown=function(r){var i=r||window.event||arguments.callee.caller.arguments[0];i&&i.keyCode==65&&(m.value=Math.max(0,m.value-1)),i&&i.keyCode==68&&(m.value=Math.min(s-1,m.value+1))}}}).catch(n=>{console.log(n)})}return(n,e)=>{const s=$,t=Z;return v(),c(x,null,[o(w)?N("",!0):(v(),c("a",se,ue)),o(w)?N("",!0):(v(),c("div",ce,[u("div",ve,[S(s,{modelValue:o(p),"onUpdate:modelValue":e[0]||(e[0]=a=>j(p)?p.value=a:p=a),class:"w-50 m-2",placeholder:"\u56DE\u653Eid"},null,8,["modelValue"]),S(t,{style:{margin:"10px"},type:"success",plain:"",onClick:e[1]||(e[1]=a=>{R()})},{default:ee(()=>[de]),_:1})])])),u("div",ie,[fe,u("span",me,T(o(M)>=2?Math.ceil(o(m)/2):o(m)),1)]),u("div",pe,[u("table",null,[u("tbody",he,[ye,(v(!0),c(x,null,V(o(D),(a,r)=>(v(),c("tr",null,[u("td",{class:L({color:"white",background:a.color,"font-weight":800})},T(r+1),3),u("td",{innerHTML:a.name},null,8,_e),u("td",{innerHTML:a.army},null,8,we),u("td",{innerHTML:a.land},null,8,ge)]))),256))])])]),o(w)?(v(),c("table",{key:2,cellspacing:"0",cellpadding:"0",border:"0",style:B({"--size":o(h)+"px","font-size":Math.min(18,Math.floor((n.now+32)/5))+"px"})},[u("tbody",{class:"map",id:"map",onMousedown:q,onMouseup:P,onMousewheel:Q},[(v(!0),c(x,null,V(o(k),a=>(v(),c("tr",null,[(v(!0),c(x,null,V(o(b),r=>(v(),c("td",{style:B({background:J(a-1,r-1)}),class:L({cell:!0,nowpos:n.nowx==a-1&&n.nowy==r-1}),onClick:i=>n.setnow(a-1,r-1)},[u("span",{class:L({num:!0,unknow:o(l)[a-1][r-1][0]==-3,visible:o(l)[a-1][r-1][0]!=-2&&o(l)[a-1][r-1][0]!=-3,mountain:o(l)[a-1][r-1][0]==-1,toxins:o(l)[a-1][r-1][0]==5,empty:o(l)[a-1][r-1][0]==0,town:o(l)[a-1][r-1][0]==1,crown:o(l)[a-1][r-1][0]==2,umbrella:o(l)[a-1][r-1][0]==3,water:o(l)[a-1][r-1][0]==4})},T(n.nowx==a-1&&n.nowy==r-1&&n.op==1?"50%":o(l)[a-1][r-1][2]?o(l)[a-1][r-1][2]:""),3)],14,ke))),256))]))),256))],32)],4)):N("",!0)],64)}}},Y=le(be);for(const[z,C]of Object.entries(re))Y.component(z,C);Y.mount("#app");
